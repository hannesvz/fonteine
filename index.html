<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Fonteine.</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" crossorigin="">
    </script>
  <style>
    html, body {
      height: 99%;
    }

    #map{
      height: 100%;
    }
  </style>

  </head>

  <body>
  <div id="map"></div>

  <script>

  const map = L.map('map').setView([-28,23], 6);
  const attribution = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
  const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
  const tiles = L.tileLayer(tileUrl, { attribution });
  tiles.addTo(map);

  let markers = [];

  // data obtained from the dataset generated by Dirk Strauss https://dirkstrauss.com/south-african-cities/

  fetch('./fonteine.json')
    .then(res => {
    res.json().then(res => {
      res.forEach(i => {

        let latLng = L.latLng([i.Latitude, i.Longitude]);
        let point = map.latLngToContainerPoint(latLng);
        let newPoint = L.point([point.x - 0, point.y - 0]);
        let newLatLng = map.containerPointToLatLng(newPoint);

        let marker = L.marker(newLatLng)
        .bindTooltip(i.AccentCity)
        .addTo(map);
        markers.push(marker);
      });
    });
  });

  </script>

  </body>
</html>
